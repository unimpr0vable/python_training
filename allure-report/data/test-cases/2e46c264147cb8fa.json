{"uid":"2e46c264147cb8fa","name":"test_add_contact_to_group","fullName":"test.test_add_contact_to_group#test_add_contact_to_group","historyId":"38ec08ef9d40e9a5f581571d44033af1","time":{"start":1655911061929,"stop":1655911063101,"duration":1172},"status":"broken","statusMessage":"pony.orm.core.UnrepeatableReadError: Phantom object ORMContact[198] disappeared","statusTrace":"app = <fixture.application.Application object at 0x00000183BBFE7BE0>\norm = <fixture.orm.ORMFixture object at 0x00000183BC119A80>\n\n    def test_add_contact_to_group(app, orm):\n        if len(orm.get_group_list()) == 0:\n            app.group.create(Group(name=\"test_name\", header=\"test_header\", footer=\"test_footer\"))\n    \n        group = random.choice(orm.get_group_list())\n    \n        # if this group have all contacts\n        if len(orm.get_contact_list()) == 0 or len(orm.get_contacts_not_in_group(group)) == 0:\n            app.contact.create(Contact(firstname=\"test\", lastname=\"test\", nickname=\"test\", company=\"test\", mobile=\"12345\",\n                               email=\"test@mail.ru\", workphone=\"12345\", secondaryphone=\"12345\", homephone=\"12345\",\n                               address=\"city street house\", email2=\"test2@mail.ru\", email3=\"test3@mail.ru\"))\n    \n        contact = random.choice(orm.get_contacts_not_in_group(group))\n    \n        app.contact.add_to_group(contact.id, group.id)\n>       assert contact in orm.get_contacts_in_group(group)\n\ntest\\test_add_contact_to_group.py:20: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n<string>:2: in get_contacts_in_group\n    ???\nenv\\lib\\site-packages\\pony\\orm\\core.py:538: in new_func\n    reraise(exc_type, exc, tb)\nenv\\lib\\site-packages\\pony\\utils\\utils.py:88: in reraise\n    try: raise exc.with_traceback(tb)\nenv\\lib\\site-packages\\pony\\orm\\core.py:519: in new_func\n    result = func(*args, **kwargs)\nfixture\\orm.py:53: in get_contacts_in_group\n    return self.convert_contacts_to_model(orm_group.contacts)\nfixture\\orm.py:40: in convert_contacts_to_model\n    return list(map(convert, contacts))\nfixture\\orm.py:39: in convert\n    return Contact(id=str(contact.id), firstname=contact.firstname, lastname=contact.lastname)\nenv\\lib\\site-packages\\pony\\orm\\core.py:2278: in __get__\n    value = attr.get(obj)\nenv\\lib\\site-packages\\pony\\orm\\core.py:2288: in get\n    val = vals[attr] if attr in vals else attr.load(obj)\nenv\\lib\\site-packages\\pony\\orm\\core.py:2272: in load\n    else: obj._load_()\nenv\\lib\\site-packages\\pony\\orm\\core.py:4827: in _load_\n    if obj not in objects: throw(UnrepeatableReadError,\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nexc_type = <class 'pony.orm.core.UnrepeatableReadError'>, args = ('Phantom object ORMContact[198] disappeared',)\nkwargs = {}\n\n    def throw(exc_type, *args, **kwargs):\n        if isinstance(exc_type, Exception):\n            assert not args and not kwargs\n            exc = exc_type\n        else: exc = exc_type(*args, **kwargs)\n        exc.__cause__ = None\n        try:\n            if not (pony.MODE == 'INTERACTIVE' and options.CUT_TRACEBACK):\n>               raise exc\nE               pony.orm.core.UnrepeatableReadError: Phantom object ORMContact[198] disappeared\n\nenv\\lib\\site-packages\\pony\\utils\\utils.py:99: UnrepeatableReadError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"stop","time":{"start":1655911017096,"stop":1655911017096,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"orm","time":{"start":1655911061782,"stop":1655911061796,"duration":14},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"app","time":{"start":1655911061797,"stop":1655911061928,"duration":131},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"afterStages":[{"name":"stop::finish","time":{"start":1655911096802,"stop":1655911097741,"duration":939},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"labels":[{"name":"parentSuite","value":"test"},{"name":"suite","value":"test_add_contact_to_group"},{"name":"host","value":"DESKTOP-GTBJKMJ"},{"name":"thread","value":"15100-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"test.test_add_contact_to_group"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":[]},"source":"2e46c264147cb8fa.json","parameterValues":[]}